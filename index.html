<!DOCTYPE html>
<html lang="zh-TW">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>æ¾³æ´²æ‰“å·¥åº¦å‡æ¸…å–®</title>
    <style>
        :root { --primary-color: #f1c40f; --bg-color: #f4f7f6; --delete-color: #ff4757; }
        body { font-family: -apple-system, system-ui, sans-serif; background-color: var(--bg-color); margin: 0; padding: 20px; color: #333; line-height: 1.5; }
        .container { max-width: 500px; margin: 0 auto; }
        h1 { text-align: center; color: #2c3e50; font-size: 1.4rem; margin-bottom: 5px; }
        .progress-wrapper { background: white; padding: 15px; border-radius: 12px; position: sticky; top: 10px; z-index: 100; box-shadow: 0 4px 10px rgba(0,0,0,0.1); margin-bottom: 20px; }
        .progress-text { display: flex; justify-content: space-between; font-size: 0.9rem; margin-bottom: 8px; font-weight: bold; }
        .progress-container { background: #eee; border-radius: 10px; height: 10px; overflow: hidden; }
        #progress-bar { background: var(--primary-color); height: 100%; width: 0%; transition: width 0.3s; }
        .section { background: white; border-radius: 12px; padding: 15px; margin-bottom: 20px; box-shadow: 0 2px 5px rgba(0,0,0,0.05); }
        .section-title { font-weight: bold; margin-bottom: 12px; color: #e67e22; border-left: 4px solid var(--primary-color); padding-left: 10px; }
        .item { display: flex; align-items: center; justify-content: space-between; padding: 8px 0; border-bottom: 1px dashed #eee; }
        .item-left { display: flex; align-items: center; flex: 1; cursor: pointer; }
        .item input[type="checkbox"] { width: 22px; height: 22px; margin-right: 12px; accent-color: var(--primary-color); flex-shrink: 0; }
        .item.checked span { text-decoration: line-through; color: #aaa; }
        .btn-del { color: var(--delete-color); background: none; border: none; font-size: 1.2rem; cursor: pointer; padding: 5px 10px; opacity: 0.6; }
        .btn-del:hover { opacity: 1; }
        .add-box { display: flex; margin-top: 15px; gap: 5px; }
        .add-box input { flex: 1; padding: 10px; border: 1px solid #ddd; border-radius: 8px; outline: none; font-size: 0.9rem; }
        .add-box button { padding: 8px 15px; border: none; background: #3498db; color: white; border-radius: 8px; font-weight: bold; }
        .reset-btn { display: block; width: 100%; padding: 10px; margin-top: 20px; background: #ddd; border: none; border-radius: 8px; color: #666; font-size: 0.8rem; cursor: pointer; }
    </style>
</head>
<body>

<div class="container">
    <h1>ğŸ‡¦ğŸ‡º æ¾³æ´²è¡Œå‰ 7 å¤©æª¢æŸ¥è¡¨ ğŸ‡¦ğŸ‡º</h1>
    
    <div class="progress-wrapper">
        <div class="progress-text"><span>æº–å‚™é€²åº¦</span><span id="progress-percent">0%</span></div>
        <div class="progress-container"><div id="progress-bar"></div></div>
    </div>

    <div id="checklist-content"></div>

    <button class="reset-btn" onclick="resetAll()">é‡ç½®æ¸…å–®ï¼ˆæ¢å¾©é è¨­å€¼ï¼‰</button>
</div>

<script>
    const defaultData = [
        { title: "ğŸ—“ï¸ å‡ºç™¼å‰ 7 å¤©ï½œæ–‡ä»¶ä¸€å®šè¦é½Š", items: ["è­·ç…§ (æ•ˆæœŸ6å€‹æœˆä»¥ä¸Š)", "æ‰“å·¥åº¦å‡ç°½è­‰ (é›»å­æª”+æˆªåœ–)", "æ©Ÿç¥¨é›»å­æª”", "æ—…éŠä¿éšª / é†«ç™‚ä¿éšª", "è­‰ä»¶æƒææª”å‚™ä»½", "è‹±æ–‡å±¥æ­· (PDF+Word)", "é›²ç«¯/éš¨èº«ç¢Ÿå‚™ä»½"] },
        { title: "ğŸ—“ï¸ å‡ºç™¼å‰ 5 å¤©ï½œ3C & ç­†é›»æº–å‚™", items: ["ç­†é›» (ä¸€å®šè¦)", "æ‰‹æ©Ÿ", "æ¾³æ´²è½‰æ¥é ­ (Iå‹)", "è¡Œå‹•é›»æº", "App: Gmail/Drive/Maps/Meet"] },
        { title: "ğŸ—“ï¸ å‡ºç™¼å‰ 4 å¤©ï½œéŒ¢ & é‡‘è", items: ["ä¿¡ç”¨å¡ (æµ·å¤–åˆ·å¡)", "å°‘é‡æ¾³å¹£ç¾é‡‘", "éŠ€è¡Œ App ç¢ºèªå¯ç”¨", "å®¶äººç·Šæ€¥è¯çµ¡äºº"] },
        { title: "ğŸ—“ï¸ å‡ºç™¼å‰ 3 å¤©ï½œç”Ÿæ´»å¿…å‚™", items: ["è½‰æ¥é ­å†æª¢æŸ¥ä¸€æ¬¡", "å¸¸ç”¨è—¥+è‹±æ–‡èªªæ˜", "éš±å½¢çœ¼é¡/çœ¼é¡å‚™å“", "å€‹äººé‡è¦ç§äººç‰©å“"] },
        { title: "ğŸ—“ï¸ å‡ºç™¼å‰ 2 å¤©ï½œå¿ƒç†æº–å‚™", items: ["å’Œå®¶äººæ‹å¹¾å¼µåˆç…§", "å¯«ä¸€å¥æƒ³å°è‡ªå·±èªªçš„è©±", "å‘Šè¨´è‡ªå·±ï¼šä¸é©æ‡‰æ˜¯æ­£å¸¸çš„"] },
        { title: "ğŸ—“ï¸ å‡ºç™¼å‰ 1 å¤©ï½œæœ€å¾Œç¢ºèª", items: ["è¡Œæé‡é‡ OK", "æ–‡ä»¶éƒ½åœ¨éš¨èº«åŒ…", "æ‰‹æ©Ÿç­†é›»å……æ»¿é›»", "é¦–æ™šä½å®¿è³‡è¨Šæˆªåœ–"] },
        { title: "ğŸŒ± è½åœ°æ¾³æ´²ç¬¬ä¸€é€±", items: ["ç”³è«‹ TFN ç¨…è™Ÿ", "é–‹éŠ€è¡Œå¸³æˆ¶", "è¾¦ SIM å¡", "é–‹å§‹æ‰¾å·¥ä½œ", "ç†Ÿæ‚‰é™„è¿‘è¶…å¸‚ & äº¤é€š"] }
    ];

    let currentData = JSON.parse(localStorage.getItem('au_checklist_data')) || defaultData;
    let checkedStatus = JSON.parse(localStorage.getItem('au_checklist_status')) || {};

    function render() {
        const container = document.getElementById('checklist-content');
        container.innerHTML = '';
        
        currentData.forEach((section, sIdx) => {
            const secDiv = document.createElement('div');
            secDiv.className = 'section';
            secDiv.innerHTML = `<div class="section-title">${section.title}</div>`;
            
            section.items.forEach((item, iIdx) => {
                const itemId = `cb-${sIdx}-${iIdx}`;
                const isChecked = checkedStatus[itemId] || false;
                
                const itemDiv = document.createElement('div');
                itemDiv.className = `item ${isChecked ? 'checked' : ''}`;
                itemDiv.innerHTML = `
                    <div class="item-left" onclick="toggleItem('${itemId}', ${sIdx}, ${iIdx})">
                        <input type="checkbox" id="${itemId}" ${isChecked ? 'checked' : ''}>
                        <span>${item}</span>
                    </div>
                    <button class="btn-del" onclick="deleteItem(${sIdx}, ${iIdx})">Ã—</button>
                `;
                secDiv.appendChild(itemDiv);
            });

            const addBox = document.createElement('div');
            addBox.className = 'add-box';
            addBox.innerHTML = `
                <input type="text" placeholder="æ–°å¢..." id="input-${sIdx}">
                <button onclick="addItem(${sIdx})">åŠ å…¥</button>
            `;
            secDiv.appendChild(addBox);
            container.appendChild(secDiv);
        });
        updateProgress();
        saveData();
    }

    function toggleItem(id, sIdx, iIdx) {
        checkedStatus[id] = !checkedStatus[id];
        render();
    }

    function addItem(sIdx) {
        const input = document.getElementById(`input-${sIdx}`);
        if (input.value.trim() !== "") {
            currentData[sIdx].items.push(input.value);
            render();
        }
    }

    function deleteItem(sIdx, iIdx) {
        if(confirm('ç¢ºå®šè¦åˆªé™¤é€™é …å—ï¼Ÿ')) {
            currentData[sIdx].items.splice(iIdx, 1);
            // é‡æ–°æ•´ç†å‹¾é¸ç‹€æ…‹ï¼Œé¿å…å°ä½éŒ¯èª¤
            const newStatus = {};
            render();
        }
    }

    function updateProgress() {
        const total = currentData.reduce((sum, sec) => sum + sec.items.length, 0);
        const checked = Object.keys(checkedStatus).filter(key => checkedStatus[key] === true).length;
        // ä¿®æ­£é‚è¼¯ï¼šåªè¨ˆç®—ç›®å‰å­˜åœ¨çš„é …ç›®
        let realChecked = 0;
        currentData.forEach((sec, sIdx) => {
            sec.items.forEach((item, iIdx) => {
                if(checkedStatus[`cb-${sIdx}-${iIdx}`]) realChecked++;
            });
        });
        
        const percent = total === 0 ? 0 : Math.round((realChecked / total) * 100);
        document.getElementById('progress-bar').style.width = percent + '%';
        document.getElementById('progress-percent').innerText = percent + '%';
    }

    function saveData() {
        localStorage.setItem('au_checklist_data', JSON.stringify(currentData));
        localStorage.setItem('au_checklist_status', JSON.stringify(checkedStatus));
    }

    function resetAll() {
        if(confirm('å°‡æ¸…å–®æ¢å¾©åˆ°åŸå§‹ç‹€æ…‹ï¼Ÿé€™æœƒåˆªé™¤ä½ æ–°å¢çš„é …ç›®ã€‚')) {
            localStorage.clear();
            currentData = JSON.parse(JSON.stringify(defaultData));
            checkedStatus = {};
            render();
        }
    }

    render();
</script>
</body>
</html>
